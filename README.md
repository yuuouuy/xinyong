# **“社会信用治理决策支持与风险预警”系统说明**

## 一、项目结构

```bash
.
├── amis/                         # 前端目录（基于 AMIS 构建）
│   └── sdk/                     # AMIS SDK 核心目录
│       ├── config/             # 配置文件目录，定义前端服务和后端服务的 URL 等信息
│       ├── icon/               # 前端页面使用的图标和 Logo
│       ├── images/             # 页面背景图及装饰图片资源
│       ├── pages/              # 前端主要页面逻辑和视图文件
│       └── script/             # 页面交互相关脚本，处理部分动态行为
│
├── flask/                        # 后端服务目录（基于 Flask 框架）
│   ├── app.py                  # 后端应用入口，定义所有 API 路由
│   └── justicegpt/             # 后端核心模块目录
│       ├── config/            # 配置文件目录，包含数据库、AI 服务、Redis 服务等配置
│       ├── model/             # 具体业务逻辑实现，每个 API 路由的处理函数
│       ├── tool/              # 提供通用工具函数，供 model 模块调用
│       └── mock/              # 模拟数据目录，用于前后端联调与开发测试
│
└── README.md                    # 项目说明文档（即本文件）

```

## 二、系统架构说明

​       本系统采用前后端分离架构，结合 Flask 微服务框架与 Amis 可视化页面构建工具，构建了一个可扩展、易部署、逻辑清晰的治理决策与预警平台。系统整体架构分为三个核心层次：**视图层、服务层、数据层**，并通过 **Nginx 进行跨域请求调度**。

![image-20250526034647234](C:\Users\yuyu\AppData\Roaming\Typora\typora-user-images\image-20250526034647234.png)

### 1️⃣ 视图层

​        系统前端采用 **Amis（基于 React.js）** 构建，具备高度可配置性与组件复用性，主要负责页面渲染、用户交互以及与后端服务的数据通信。所有页面集中在 `pages/` 目录下，采用配置式 JSON 或 HTML 格式组织页面布局与逻辑。

#### 页面模块说明：

| 页面文件        | 说明                                                       |
| --------------- | ---------------------------------------------------------- |
| `home.html`     | 系统首页，展示平台入口、导航结构、功能介绍等基本信息       |
| `ask.html`      | 法规案例检索页面，支持关键词搜索、条件组合筛选、高级检索等 |
| `case.html`     | 法规案例详情页，用于展示单个检索结果的完整法规与案例内容   |
| `analysis.html` | 智能分析页面，支持基于自然语言的问题咨询与多轮对话交互     |

​        每个页面均由 Amis 组件构建，具备良好的响应式设计与可拓展性，能够根据实际需求灵活调整交互逻辑和展示样式。页面之间通过路由跳转连接，前端与后端通信主要通过标准 REST API 接口实现。

### 2️⃣ 服务层

​        系统后端采用 Python 的 Flask 框架实现，采用模块化服务设计，主要包括两个核心子模块：

| 服务模块      | 功能职责                                                     |
| ------------- | ------------------------------------------------------------ |
| **Base 服务** | 作为主要业务服务模块，负责处理前端页面请求、组织 API 路由、调度业务逻辑 |
| **AI 服务**   | 提供智能问答与法律分析能力，依托大模型接口完成文本理解与生成任务 |

#### Base 服务接口说明：

| 接口路径  | 功能说明                                                     |
| --------- | ------------------------------------------------------------ |
| `/index`  | 首页组件聚合接口，返回多个模块内容组合后的数据               |
| `/page`   | 法规案例分页查询接口，支持按条件筛选与页码控制               |
| `/tags`   | 页面动态标签接口，返回前端展示用的法规案例关键词或分类标签   |
| `/detail` | 法规案例详情接口，根据 ID 查询对应法规条文与判例全文         |
| `/aiAsk`  | 智能分析接口，接收自然语言问题并转发至 AI 服务返回智能问答结果 |

#### AI 服务说明：

​        AI 服务基于大语言模型提供智能法律问答、条文引用建议与文本摘要功能，当前支持：

- 对用户输入的自然语言提问进行理解与回答；
- 提供引用法律条文或判例作为答复依据；
- 支持与前端多轮交互，结合上下文生成合理回复。

### 3️⃣ 数据层

- **Elasticsearch**：用于法规案例的全文索引与检索，支持高级查询与结果排序。
- **Redis**：缓存模型调用结果、用户会话历史等，提升响应速度与并发性能。

### 4️⃣ Nginx

​       由于浏览器的同源策略限制，当前端页面向不同域名的后端服务发起请求时，可能会触发跨域访问错误（CORS），影响前后端正常通信。Amis 框架本身对跨域配置支持较为有限，无法直接处理复杂的跨域请求头设置。为解决该问题，系统引入了 Nginx 作为中间代理，通过配置响应头实现跨域资源共享（CORS）控制。通过 Nginx 的统一调度，前端 Amis 页面可以无障碍地访问后端 Base 服务，从而实现稳定、高效的跨域通信机制。

### 5️⃣ 系统调用关系

​        如下图所示，系统各服务模块间调用关系清晰、职责分明。前端 Amis 页面通过用户操作发起请求，由后端的 Base 服务统一接收并进行调度。根据请求的具体类型，Base 服务会调用不同的后端组件：当需要执行法规案例的搜索与筛选时，系统将访问 Elasticsearch，完成全文检索与排序逻辑；当涉及到多轮对话、用户历史信息管理等功能时，系统通过 Redis 进行上下文的读写与缓存优化；若请求内容为智能问答或法条分析，则由 Base 服务将数据转发至 AI 服务模块，由其完成基于大语言模型的处理。所有服务调用最终均由 Base 服务汇总结果，并返回给前端进行展示与交互。

![image-20250526035446876](C:\Users\yuyu\AppData\Roaming\Typora\typora-user-images\image-20250526035446876.png)



## 三、系统功能需求

​	    本系统命名为**“社会信用治理决策支持与风险预警系统”**，旨在为社会治理相关场景提供智能化的法律法规检索服务与多轮对话交互支持，提升决策效率和风险响应能力。系统整体可分为两大核心模块：**<u>法规案例检索模块</u>**与**<u>智能分析模块</u>**，具体功能结构如下图所示：

![需求架构图](C:\Users\yuyu\Downloads\需求架构图.png)

### 1️⃣ 法规案例检索模块

​       该模块聚焦于法律法规、裁判文书等内容的智能化搜索，主要包含以下功能：

- **全文检索**：支持用户输入关键字快速搜索相关法规或案例内容。
- **高级检索**：支持多维度条件组合查询（如时间、地区、案件类型等）。
- **条件编辑**：允许用户灵活配置和修改检索条件。
- **结果排序**：基于相关性、时间等维度对检索结果进行排序。
- **查看法规案例**：对检索结果进行详细展示，便于用户深入查阅。

### 2️⃣ 智能分析模块

​       该模块基于大模型能力，面向用户提供法律咨询与风险研判，核心功能包括：

- **多轮对话**：支持与系统进行连续语义交互，逐步深入问题本质。
- **保留历史记录**：每轮对话将自动存档，便于后续追溯和分析。
- **法条引用支持**：系统可在回答中提供相关法规条文支持，增强解释的权威性。
- **社会信用治理问题咨询**：聚焦于社会信用建设、失信惩戒等治理场景，提供针对性问题解答。

## 四、系统概述

​	    目前系统主要是主页、法规案例检索、智能分析。

### 1️⃣ 主页

​	    主页主要是欢迎页，设置导航栏，可自由选择法规案例检索或智能分析。

![image-20250526044717820](C:\Users\yuyu\AppData\Roaming\Typora\typora-user-images\image-20250526044717820.png)

### 2️⃣ 法规案例检索

​	    此模块是一个功能强大的法规案例检索模块，提供全文检索和高级检索功能。用户可以使用全文检索来搜索案例，同时也可以利用十余种条件进行高级检索。此外，用户还可以动态地增加或删除筛选条件，以便更精确地筛选所需的案例。最后，用户还可以对搜索结果进行相关性排序或时间排序，以便更好地组织和浏览检索到的案例。

#### 2.1 使用说明-检索页面

##### 2.1.1 全文检索

- **第一步：**在文本框中**输入**全文检索文本。
- **第二步：**按**Enter键**或点击**按钮**，系统将自动返回检索结果在下方。

![图片1](C:\Users\yuyu\Downloads\图片1.png)

##### 2.1.2 高级检索

- **第一步：**点击**高级检索**按钮激活条件面板。
- **第二步：**选择、输入高级检索条件。
- **第三步：**点击检索按钮，系统将自动返回检索结果在下方。

![图片2](C:\Users\yuyu\Downloads\图片2.png)

![image-20250526052028837](C:\Users\yuyu\AppData\Roaming\Typora\typora-user-images\image-20250526052028837.png)

##### 2.1.3 增删条件

- 点击每个条件后的×删除条件。
- 点击左侧面板的条件新增筛选条件。

![图片4](C:\Users\yuyu\Downloads\图片4.png)

##### 2.1.4 排序

-  选择排序方式。

![图片5](C:\Users\yuyu\Downloads\图片5.png)

#### 2.2 使用说明-法规案例详情

- 点击单个法规案例框进入详情界面。

![图片6](C:\Users\yuyu\Downloads\图片6.png)

![image-20250526054534213](C:\Users\yuyu\AppData\Roaming\Typora\typora-user-images\image-20250526054534213.png)

### 3️⃣ 智能分析

## 五、快速启动指南

​	    本项目基于前后端分离架构，前端采用 Amis 渲染页面，后端使用 Flask 提供 API 服务，并依赖 Elasticsearch、Redis、Nginx 等组件支持。以下为完整的部署与启动步骤。

------

### ✅ 1. 环境要求

​	    请确保本地或服务器已安装以下依赖组件：

| 组件                | 推荐版本                         |
| ------------------- | -------------------------------- |
| Python              | ≥ 3.8                            |
| Node.js（前端可选） | ≥ 14.x（如需自行构建 AMIS 页面） |
| Elasticsearch       | 7.2.0                            |
| Redis               | 7.2.4                            |
| Nginx               | 1.22.1                           |
| Conda（推荐）       | ≥ 4.12                           |

### ✅ 2. 克隆仓库

```bash
bash
git clone https://github.com/your_username/your_project.git
cd your_project
```

------

### ✅ 3. 安装后端依赖

​	    建议使用 Conda 创建虚拟环境并安装 Flask 依赖：

```bash
bash
conda create -n xxx python=3.10
conda activate xxx
pip install -r flask/requirements.txt
```

> 请根据项目路径调整 `requirements.txt` 位置。

------

### ✅ 4. 启动基础服务

​	    请提前部署并启动以下组件：

- **Elasticsearch 7.2.0**

  ```bash
  bash
  ./elasticsearch-7.2.0/bin/elasticsearch
  ```

- **Redis 7.2.4**

  ```bash
  bash
  sudo systemctl start redis-server
  ```

- **Nginx 1.22.1**
   可参考以下简单配置启用 CORS：

  ```bash
  bash
  ./ngin-1.22.1/sbin/nginx
  ```

------

### ✅ 5. 启动后端服务（Flask）

​	    进入后端项目目录并运行入口文件：

```bash
bash
cd flask/
python app.py
```

### ✅ 6. 启动 AI 服务

​	    若需启用智能分析功能，请进入 AI 模型目录并运行：

```bash
bash
待填入
```

------

### ✅ 7. 访问系统

> 若已配置好 Nginx 并前后端联通：

浏览器访问：

```bash
bash
http://localhost:8080      #默认8080端口
```

